# llms-full-unbind

> Unbind `llms-full.txt` into individual pages programmatically.

A specialized parser designed to extract pages from the monolithic `llms-full.txt` format.

[![NPM license](https://img.shields.io/npm/l/llms-full-unbind.svg)][npm-package]
[![NPM version](https://img.shields.io/npm/v/llms-full-unbind.svg)][npm-package]

## Supported Formats

This library automatically detects and parses three common `llms-full.txt` formats:

### 1. `llms_txt2ctx` Format

Generated by the [`llms_txt2ctx`](https://llmstxt.org/intro.html#cli) CLI from the [llms-txt](https://github.com/AnswerDotAI/llms-txt) package.
Used by [fastht.ml](https://fastht.ml/docs/llms-ctx-full.txt) and similar projects.

```xml
<doc title="Page Title" desc="Optional description">
Content of the page...
</doc>
```

### 2. `vitepress-plugin-llms` Format

Generated by [vitepress-plugin-llms](https://github.com/okineadev/vitepress-plugin-llms). Used by [vuejs.org](https://vuejs.org/llms-full.txt) and similar VitePress-based projects.

```markdown
# Page Title {#optional-anchor}

Content of the page...

url: /optional/metadata.md

---

# Another Page

More content...
```

### 3. Mintlify Format

Generated by [Mintlify](https://www.mintlify.com/docs/ai/llmstxt). Used by [modelcontextprotocol.io](https://modelcontextprotocol.io/llms-full.txt) and similar Mintlify-based projects.

```markdown
# Page Title

Source: https://example.com/path/to/page

Content of the page...

# Another Page

Source: https://example.com/path/to/another

More content...
```

## Installation

```bash
npm install llms-full-unbind
```

## Usage

### Basic Usage

Fetch the text content and unbind it in one go.

```typescript
import { unbind } from "llms-full-unbind";

// 1. Fetch the remote llms-full.txt
const response = await fetch("https://example.com/llms-full.txt");
const text = await response.text();

// 2. Unbind into pages
const pages = unbind(text);

console.log(`Extracted ${pages.length} pages.`);
```

### Streaming Usage (Recommended)

For large `llms-full.txt` files, use `unbindStream` to process data chunk-by-chunk directly from the network response. This minimizes memory usage.

```typescript
import { unbindStream } from "llms-full-unbind";

const response = await fetch("https://example.com/llms-full.txt");

if (!response.body) {
  throw new Error("Response body is empty");
}

// Pipe the Web Stream directly into the parser
for await (const page of unbindStream(response.body)) {
  console.log(`Processed: ${page.title}`);
  // e.g. Save to DB or display immediately
}
```

## API

### `unbind(content: string): Page[]`

Parses the entire string synchronously and returns an array of pages.

### `unbindStream(stream: ReadableStream | AsyncIterable): AsyncIterable<Page>`

Accepts a standard Web `ReadableStream` (returned by `fetch`) or any Async Iterable. Yields pages as soon as they are parsed.

#### Type Definition: `Page`

```typescript
export interface Page {
  title: string;
  content: string; // The extracted text content
  metadata?: Record<string, unknown>;
}
```

## License

MIT

[npm-package]: https://www.npmjs.com/package/llms-full-unbind
