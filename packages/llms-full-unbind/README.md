# llms-full-unbind

> Unbind `llms-full.txt` into individual pages programmatically.

A specialized parser designed to extract pages from the monolithic `llms-full.txt` format.

[![NPM license](https://img.shields.io/npm/l/llms-full-unbind.svg)][npm-package]
[![NPM version](https://img.shields.io/npm/v/llms-full-unbind.svg)][npm-package]

## Usage

### Basic Usage

Fetch the text content and unbind it in one go.

```typescript
import { unbind } from "llms-full-unbind";

// 1. Fetch the remote llms-full.txt
const response = await fetch("https://example.com/llms-full.txt");
const text = await response.text();

// 2. Unbind into pages
const pages = Array.from(unbind(text));

console.log(`Extracted ${pages.length} pages.`);
```

### Streaming Usage (Recommended)

For large `llms-full.txt` files, use `unbindStream` to process data chunk-by-chunk directly from the network response. This minimizes memory usage.

```typescript
import { unbindStream } from "llms-full-unbind";

const response = await fetch("https://example.com/llms-full.txt");

if (!response.body) {
  throw new Error("Response body is empty");
}

// Pipe the Web Stream directly into the parser
for await (const page of unbindStream(response.body)) {
  console.log(`Processed: ${page.title}`);
  // e.g. Save to DB or display immediately
}
```

## Supported Formats

This library automatically detects and parses five common `llms-full.txt` formats:

### `<doc>` Tag Based Format

This format wraps each page in the `<doc>` tag with optional metadata attributes.
Generated by the [`llms_txt2ctx`](https://llmstxt.org/) CLI from the [llms-txt](https://github.com/AnswerDotAI/llms-txt) package.
Used by [fastht.ml](https://fastht.ml/docs/llms-ctx-full.txt) and similar projects.

```markdown
<doc title="Page Title" desc="Optional description">
Content of the page...
</doc>
```

### `<page>` Tag Based Format

This format wraps each page in the `<page>` tag.
Used by [cloudflare.com](https://developers.cloudflare.com/llms-full.txt) project.

```markdown
<page>
Content of the page...
</page>
```

### Frontmatter-separated Format

Pages are separated by frontmatter-style metadata blocks.
Generated by [vitepress-plugin-llms](https://github.com/okineadev/vitepress-plugin-llms).
Used by [vuejs.org](https://vuejs.org/llms-full.txt), [vitejs.dev](https://vitejs.dev/llms-full.txt), [vitepress.dev](https://vitepress.dev/llms-full.txt) and similar VitePress-based projects.

<!-- prettier-ignore-start -->

```markdown
# Page Title {#optional-anchor}

Content of the page...

---
url: /optional/metadata.md
---

# Another Page

More content...
```

<!-- prettier-ignore-end -->

### Header and Source URL Format

Each page starts with a markdown header followed by a `Source:` line indicating the page URL.
Generated by [Mintlify](https://www.mintlify.com/docs/ai/llmstxt).
Used by [modelcontextprotocol.io](https://modelcontextprotocol.io/llms-full.txt) and [bun.sh](https://bun.sh/llms-full.txt).

<!-- prettier-ignore-start -->

```markdown
# Page Title
Source: https://example.com/path/to/page

Content of the page...

# Another Page
Source: https://example.com/path/to/another

More content...
```

<!-- prettier-ignore-end -->

### H1 Header Based Format

Pages are separated by H1 headers (`# Title`).
Used by projects like [svelte.dev](https://svelte.dev/llms-full.txt), [nuxt.com](https://nuxt.com/llms-full.txt), and [docs.astro.build](https://docs.astro.build/llms-full.txt).

```markdown
# Page Title

Content of the page...

# Another Page

More content...
```

## Installation

```bash
npm install llms-full-unbind
```

## API

### `unbind(content: string): Iterable<Page>`

Parses the entire string synchronously and returns an iterable (Generator) of pages. Use `Array.from(unbind(content))` to get an array.

### `unbindStream(stream: ReadableStream | AsyncIterable): AsyncIterable<Page>`

Accepts a standard Web `ReadableStream` (returned by `fetch`) or any Async Iterable. Yields pages as soon as they are parsed.

#### Type Definition: `Page`

```typescript
export interface Page {
  title: string;
  content: string; // The extracted text content
  metadata?: Record<string, unknown>;
}
```

## License

MIT

[npm-package]: https://www.npmjs.com/package/llms-full-unbind
